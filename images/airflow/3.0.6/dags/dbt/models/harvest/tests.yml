version: 2

models:
  - name: tests
    desription: Metadata and configurations for all test run by dbt.
    columns:
      - name: id
        data_tests:
          - primary_key
      - name: test_id
        data_tests:
          - not_null
          - expression_is_true:
              arguments:
                expression: "LIKE 'test.spice_rack.%'"
      - name: validation_level
        data_tests:
          - expression_is_true:
              arguments:
                expression: "IS NOT NULL"
                condition: "test_name NOT IN ('dry-typeform_landings-new_hidden_keys', 'dry-typeform_questions-no_new_tests')"
      - name: generic_validation_type
        data_tests:
          - expression_is_true:
              arguments:
                expression: "IS NOT NULL"
                condition: "test_type <> 'custom'"