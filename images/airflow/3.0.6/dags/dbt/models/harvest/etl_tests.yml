version: 2

models:
  - name: etl_tests
    description: Information surrounding all tables tests by dbt in production
    columns:
      - name: test_result_id
        data_tests:
          - primary_key
      - name: test_id
        data_tests:
          - not_null
      - name: test_result
        data_tests:
          - not_null
          - accepted_values:
              arguments:
                values: ['error', 'fail', 'pass', 'success']
      - name: total_time_seconds
        data_tests:
          - not_null
      - name: count_failing_rows
        data_tests:
          - expression_is_true:
              arguments:
                expression: "IS NOT NULL"
                condition: "test_result <> 'error'"