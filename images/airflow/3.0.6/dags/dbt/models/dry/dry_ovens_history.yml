version: 2

models:
  - name: dry_ovens_history
    columns:
      - name: ovens_history_id
        data_tests:
          - primary_key
      - name: updated
        data_tests:
          - not_null
      - name: action
        data_tests:
          - not_null 
          - accepted_values:
              arguments:
                values: ['INSERT', 'UPDATE', 'DELETE', 'MIGRATION']
          - expression_is_true:
              arguments:
                expression: "= 'DELETE'"
                condition: "device_id IS NULL"
